====================
FILE: D:\Work\Andrej71Fs\Src\ReceiptBrowser\ReceiptBrowser\App.xaml
====================

<prism:PrismApplication x:Class="ReceiptBrowser.App"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:local="clr-namespace:ReceiptBrowser"
             xmlns:prism="http://prismlibrary.com/" >
    <Application.Resources>
         
    </Application.Resources>
</prism:PrismApplication>




====================
FILE: D:\Work\Andrej71Fs\Src\ReceiptBrowser\ReceiptBrowser\App.xaml.cs
====================

using Prism.Ioc;
using Prism.Regions;
using ReceiptBrowser.ViewModels;
using ReceiptBrowser.Views;
using System.Windows;

namespace ReceiptBrowser
{
    /// <summary>
    /// Interaction logic for App.xaml
    /// </summary>
    public partial class App
    {
        #region Protected Methods

        protected override Window CreateShell()
        {
            return Container.Resolve<MainWindow>();
        }

        protected override void OnInitialized()
        {
            base.OnInitialized();

            var rm = Container.Resolve<IRegionManager>();
            rm.RequestNavigate("MainRegion", nameof(ReceiptBrowserView));
        }

        protected override void RegisterTypes(IContainerRegistry containerRegistry)
        {
            containerRegistry.Register<IReceiptApi, ReceiptApiStub>();

            containerRegistry.RegisterSingleton<FilterViewModel>();
            containerRegistry.RegisterSingleton<TableViewModel>();
            containerRegistry.RegisterSingleton<DetailsViewModel>();

            containerRegistry.RegisterForNavigation<ReceiptBrowserView>();
        }

        #endregion Protected Methods
    }
}



====================
FILE: D:\Work\Andrej71Fs\Src\ReceiptBrowser\ReceiptBrowser\Receipt.cs
====================

using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace ReceiptBrowser
{
    public class Receipt
    {
        #region Public Properties

        public string ReferenceId { get; set; }
        public decimal TotalAmount { get; set; }
        public string CardType { get; set; }

        #endregion Public Properties
    }
}



====================
FILE: D:\Work\Andrej71Fs\Src\ReceiptBrowser\ReceiptBrowser\ReceiptApi.cs
====================

using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace ReceiptBrowser
{
    public interface IReceiptApi
    {
        #region Public Methods

        IEnumerable<Receipt> LoadReceipts();

        #endregion Public Methods
    }

    public class ReceiptApiStub : IReceiptApi
    {
        #region Public Methods

        public IEnumerable<Receipt> LoadReceipts()
        {
            return new List<Receipt>
            {
                new Receipt { ReferenceId = "1001", TotalAmount = 10, CardType = "VISA" },
                new Receipt { ReferenceId = "1002", TotalAmount = 20, CardType = "MC" }
            };
        }

        #endregion Public Methods
    }
}



====================
FILE: D:\Work\Andrej71Fs\Src\ReceiptBrowser\ReceiptBrowser\ViewModels\DetailsViewModel.cs
====================

using Prism.Mvvm;

namespace ReceiptBrowser.ViewModels
{
    public class DetailsViewModel : BindableBase
    {
        #region Private Fields

        private Receipt _receipt;

        #endregion Private Fields

        #region Public Properties

        public Receipt Receipt
        {
            get => _receipt;
            set => SetProperty(ref _receipt, value);
        }

        #endregion Public Properties
    }
}



====================
FILE: D:\Work\Andrej71Fs\Src\ReceiptBrowser\ReceiptBrowser\ViewModels\FilterViewModel.cs
====================

using Prism.Commands;
using Prism.Mvvm;
using System;
using System.Collections.Generic;

namespace ReceiptBrowser.ViewModels
{
    public class FilterViewModel : BindableBase
    {
        #region Private Fields

        private readonly IReceiptApi _api;

        #endregion Private Fields

        #region Private Methods

        private void OnLoad()
        {
            var receipts = _api.LoadReceipts();
            ReceiptsLoaded?.Invoke(receipts);
        }

        #endregion Private Methods

        #region Public Constructors

        public FilterViewModel(IReceiptApi api)
        {
            _api = api;
            LoadCommand = new DelegateCommand(OnLoad);
        }

        #endregion Public Constructors

        #region Public Events

        public event Action<IEnumerable<Receipt>> ReceiptsLoaded;

        #endregion Public Events

        #region Public Properties

        public DelegateCommand LoadCommand { get; }

        #endregion Public Properties
    }
}



====================
FILE: D:\Work\Andrej71Fs\Src\ReceiptBrowser\ReceiptBrowser\ViewModels\MainWindowViewModel.cs
====================

using Prism.Mvvm;

namespace ReceiptBrowser.ViewModels
{
    public class MainWindowViewModel : BindableBase
    {
        #region Private Fields

        private string _title = "Receipt Browser";

        #endregion Private Fields

        #region Public Constructors

        public MainWindowViewModel(ReceiptBrowserViewModel browserVM)
        {
            BrowserVM = browserVM;
        }

        #endregion Public Constructors

        #region Public Properties

        public string Title
        {
            get => _title;
            set => SetProperty(ref _title, value);
        }

        public ReceiptBrowserViewModel BrowserVM { get; }

        #endregion Public Properties
    }
}



====================
FILE: D:\Work\Andrej71Fs\Src\ReceiptBrowser\ReceiptBrowser\ViewModels\ReceiptBrowserViewModel.cs
====================

using Prism.Ioc;
using Prism.Mvvm;
using System;
using System.Collections.Generic;
using System.Collections.ObjectModel;

namespace ReceiptBrowser.ViewModels
{
    public class ReceiptBrowserViewModel : BindableBase
    {
        #region Private Fields

        private readonly IContainerProvider _container;

        private FilterViewModel _filterVM;

        private TableViewModel _tableVM;

        private DetailsViewModel _detailsVM;

        #endregion Private Fields

        #region Private Methods

        private void OnReceiptsLoaded(IEnumerable<Receipt> receipts)
        {
            TableVM.Receipts = new ObservableCollection<Receipt>(receipts);
        }

        private void OnReceiptSelected(Receipt receipt)
        {
            DetailsVM.Receipt = receipt;
        }

        #endregion Private Methods

        #region Public Constructors

        public ReceiptBrowserViewModel(IContainerProvider container)
        {
            _container = container;
        }

        #endregion Public Constructors

        #region Public Properties

        public FilterViewModel FilterVM
        {
            get
            {
                if (_filterVM == null)
                {
                    _filterVM = _container.Resolve<FilterViewModel>();
                    _filterVM.ReceiptsLoaded += OnReceiptsLoaded;
                }
                return _filterVM;
            }
        }

        public TableViewModel TableVM
        {
            get
            {
                if (_tableVM == null)
                {
                    _tableVM = _container.Resolve<TableViewModel>();
                    _tableVM.ReceiptSelected += OnReceiptSelected;
                }
                return _tableVM;
            }
        }

        public DetailsViewModel DetailsVM
        {
            get
            {
                if (_detailsVM == null)
                {
                    _detailsVM = _container.Resolve<DetailsViewModel>();
                }
                return _detailsVM;
            }
        }

        #endregion Public Properties
    }
}



====================
FILE: D:\Work\Andrej71Fs\Src\ReceiptBrowser\ReceiptBrowser\ViewModels\TableViewModel.cs
====================

using Prism.Mvvm;
using System;
using System.Collections.ObjectModel;

namespace ReceiptBrowser.ViewModels
{
    public class TableViewModel : BindableBase
    {
        #region Private Fields

        private Receipt _selectedReceipt;

        private ObservableCollection<Receipt> _receipts = new();

        #endregion Private Fields

        #region Public Events

        public event Action<Receipt> ReceiptSelected;

        #endregion Public Events

        #region Public Properties

        public ObservableCollection<Receipt> Receipts
        {
            get => _receipts;
            set => SetProperty(ref _receipts, value);
        }

        public Receipt SelectedReceipt
        {
            get => _selectedReceipt;

            set
            {
                if (SetProperty(ref _selectedReceipt, value))
                {
                    ReceiptSelected?.Invoke(value);
                }
            }
        }

        #endregion Public Properties
    }
}



====================
FILE: D:\Work\Andrej71Fs\Src\ReceiptBrowser\ReceiptBrowser\Views\DetailsView.xaml
====================

<UserControl x:Class="ReceiptBrowser.Views.DetailsView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <StackPanel Margin="5">
        <TextBlock Text="{Binding Receipt.ReferenceId}" />
        <TextBlock Text="{Binding Receipt.TotalAmount}" />
        <TextBlock Text="{Binding Receipt.CardType}" />
    </StackPanel>
</UserControl>



====================
FILE: D:\Work\Andrej71Fs\Src\ReceiptBrowser\ReceiptBrowser\Views\DetailsView.xaml.cs
====================

using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;

namespace ReceiptBrowser.Views
{
    /// <summary>
    /// Interaction logic for DetailsView.xaml
    /// </summary>
    public partial class DetailsView : UserControl
    {
        public DetailsView()
        {
            InitializeComponent();
        }
    }
}




====================
FILE: D:\Work\Andrej71Fs\Src\ReceiptBrowser\ReceiptBrowser\Views\FilterView.xaml
====================

<UserControl x:Class="ReceiptBrowser.Views.FilterView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <StackPanel Orientation="Horizontal" Margin="5">
        <Button Content="Load Receipts"
                Command="{Binding LoadCommand}" />
    </StackPanel>
</UserControl>



====================
FILE: D:\Work\Andrej71Fs\Src\ReceiptBrowser\ReceiptBrowser\Views\FilterView.xaml.cs
====================

using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;

namespace ReceiptBrowser.Views
{
    /// <summary>
    /// Interaction logic for FilterView.xaml
    /// </summary>
    public partial class FilterView : UserControl
    {
        public FilterView()
        {
            InitializeComponent();
        }
    }
}




====================
FILE: D:\Work\Andrej71Fs\Src\ReceiptBrowser\ReceiptBrowser\Views\MainWindow.xaml
====================

<Window x:Class="ReceiptBrowser.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:prism="http://prismlibrary.com/"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:views="clr-namespace:ReceiptBrowser.Views"
        prism:ViewModelLocator.AutoWireViewModel="True">

    <ContentControl prism:RegionManager.RegionName="MainRegion" />
</Window>



====================
FILE: D:\Work\Andrej71Fs\Src\ReceiptBrowser\ReceiptBrowser\Views\MainWindow.xaml.cs
====================

using System.Windows;

namespace ReceiptBrowser.Views
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
        }
    }
}




====================
FILE: D:\Work\Andrej71Fs\Src\ReceiptBrowser\ReceiptBrowser\Views\ReceiptBrowserView.xaml
====================

<UserControl x:Class="ReceiptBrowser.Views.ReceiptBrowserView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:prism="http://prismlibrary.com/"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:views="clr-namespace:ReceiptBrowser.Views"
             prism:ViewModelLocator.AutoWireViewModel="True">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <views:FilterView  Grid.Row="0" DataContext="{Binding FilterVM}" />
        <views:TableView   Grid.Row="1" DataContext="{Binding TableVM}" />
        <views:DetailsView Grid.Row="2" DataContext="{Binding DetailsVM}" />
    </Grid>
</UserControl>



====================
FILE: D:\Work\Andrej71Fs\Src\ReceiptBrowser\ReceiptBrowser\Views\ReceiptBrowserView.xaml.cs
====================

using Prism.Ioc;
using ReceiptBrowser.ViewModels;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;

namespace ReceiptBrowser.Views
{
    /// <summary>
    /// Interaction logic for ReceiptBrowserView.xaml
    /// </summary>
    public partial class ReceiptBrowserView : UserControl
    {
        //protected override void OnInitialized(System.EventArgs e)
        //{
        //    base.OnInitialized(e);

        //    var container = ContainerLocator.Container;

        //    DataContext = container.Resolve<ReceiptBrowserViewModel>();
        //}

        #region Public Constructors

        public ReceiptBrowserView()
        {
            InitializeComponent();
        }

        #endregion Public Constructors
    }
}



====================
FILE: D:\Work\Andrej71Fs\Src\ReceiptBrowser\ReceiptBrowser\Views\TableView.xaml
====================

<UserControl x:Class="ReceiptBrowser.Views.TableView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <DataGrid ItemsSource="{Binding Receipts}"
              SelectedItem="{Binding SelectedReceipt, Mode=TwoWay}"
              AutoGenerateColumns="True"
              Margin="5" />
</UserControl>



====================
FILE: D:\Work\Andrej71Fs\Src\ReceiptBrowser\ReceiptBrowser\Views\TableView.xaml.cs
====================

using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;

namespace ReceiptBrowser.Views
{
    /// <summary>
    /// Interaction logic for TableView.xaml
    /// </summary>
    public partial class TableView : UserControl
    {
        public TableView()
        {
            InitializeComponent();
        }
    }
}




